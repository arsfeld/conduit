#!/bin/sh
# Start Conduit

# Work around https://bugs.launchpad.net/ubuntu/+source/firefox/+bug/26436
# Note: This bug is also present in Mandriva and Fedora, for this reason, 
# We will use run-mozilla in all cases

# Run mozilla takes care of settin up the appropriate environment variables
# to run a program using mozilla libs

export LD_LIBRARY_PATH=/opt/gio/lib/
export PYTHONPATH=/opt/gio/lib/python2.5/site-packages/gtk-2.0/

for d in `ls -d /usr/lib*/firefox* | sort -r`
do
    if [ -x $d/run-mozilla.sh ]; then
        echo INFO: FOUND FIREFOX LIBS AT $d
        $d/run-mozilla.sh $(dirname $0)/conduit.real $*
        exit
    fi
done

echo "WARNING: COULD NOT FIND FIREFOX LIBRARIES"
echo "WARNING: CONDUIT MAY CRASH UNEXPECTEDLY"
echo "WARNING: PLEASE TALK TO THE PERSON WHO PACKAGED CONDUIT"
$(dirname $0)/conduit.real $*

